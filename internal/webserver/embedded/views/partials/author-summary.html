<div class="card text-bg-secondary mb-3">
    <div class="row">
        <div class="card-body col-sm-6 col-md-6 col-lg-9">
            <h2 class="card-title ms-3">{{.Author.Name}}</h2>
            {{if .AuthorData.Description .Lang}}
                <p class="card-text ms-3 capitalize">{{.AuthorData.Description .Lang}}</p>
            {{end}}

            <dl class="ms-3">
                {{if or (ne .AuthorData.DateOfBirth 0) (ne .AuthorData.YearOfBirth 0)}}
                    <dt>{{t .Lang "Date of birth"}}</dt>
                    <dd>
                        {{if ne .AuthorData.YearOfBirth 0}}
                            {{.AuthorData.YearOfBirthAbs}}
                            {{if lt .AuthorData.YearOfBirth 0}}
                                <abbr title='{{t .Lang "Before Christ"}}'>{{t .Lang "BC"}}</abbr>
                            {{end}}

                        {{else}}
                            <time datetime='{{.AuthorData.DateOfBirth.FormatISO 6}}'>{{.AuthorData.DateOfBirth.FormatISO 6}}</time>
                            {{if lt .AuthorData.DateOfBirth.Year 0}}
                                <abbr title='{{t .Lang "Before Christ"}}'>{{t .Lang "BC"}}</abbr>
                            {{end}}
                            {{if and (gt .AuthorData.Age 0) (eq .AuthorData.DateOfDeath 0) (eq .AuthorData.YearOfDeath 0)}}
                                ({{t .Lang "%d years old" .AuthorData.Age}})
                            {{end}}
                        {{end}}
                    </dd>
                {{end}}

                {{if or (ne .AuthorData.DateOfDeath 0) (ne .AuthorData.YearOfDeath 0)}}
                    <dt>{{t .Lang "Date of death"}}</dt>
                    <dd>
                        {{if ne .AuthorData.YearOfDeath 0}}
                            {{.AuthorData.YearOfDeathAbs}}
                            {{if lt .AuthorData.YearOfDeath 0}}
                                <abbr title='{{t .Lang "Before Christ"}}'>{{t .Lang "BC"}}</abbr>
                            {{end}}
                        {{else}}
                            <time datetime='{{.AuthorData.DateOfDeath.FormatISO 6}}'>{{.AuthorData.DateOfDeath.FormatISO 6}}</time>
                            {{if lt .AuthorData.DateOfDeath.Year 0}}
                            <abbr title='{{t .Lang "Before Christ"}}'>{{t .Lang "BC"}}</abbr>
                            {{end}}
                            {{if gt .AuthorData.Age 0}}
                                ({{t .Lang "%d years old" .AuthorData.Age}})
                            {{end}}
                        {{end}}
                    </dd>
                {{end}}
            </dl>
            <ul class="list-unstyled ms-3">
                {{if .AuthorData.Website}}
                    <li>
                        <i class="bi-globe-europe-africa me-2"></i>
                        <a href="{{.AuthorData.Website}}" class="link-light">{{t .Lang "Official website"}}</a>
                    </li>
                {{end}}

                {{if .AuthorData.WikipediaLink .Lang}}
                    <li>
                        <i class="bi-wikipedia me-2"></i>
                        <a href="{{.AuthorData.WikipediaLink .Lang}}" class="link-light">{{t .Lang "Go to Wikipedia entry"}}</a>
                    </li>
                {{end}}
            </ul>

            {{if eq .Session.Role 2}}
                {{if ne .AuthorData.SourceID "" }}
                <p class="ms-3"><small>
                    <i class="bi-person-fill-exclamation me-2"></i>
                    <a class="link-light" data-bs-toggle="collapse" href="#update-author-form" aria-expanded="false">
                        {{ t .Lang "Is not the right author? Click here to update the Wikidata ID" }}
                    </a>
                </small>
                </p>
                <div class="collapse" id="update-author-form">
                    <p class="ms-3"><small>{{ t .Lang "The Wikidata ID is a unique identifier for the author in the Wikidata database. If you know the correct ID, you can update it here." }}</small></p>
                    <div class="row">
                        <div class="col-12 col-lg-6">
                            <form hx-put="/authors/{{.Author.Slug}}" class="ms-3">
                                <div class="input-group input-group-sm">
                                    <input class="form-control" type="text" name="sourceID" value="{{.AuthorData.SourceID}}">
                                    <button type="submit" class="btn btn-dark">{{t .Lang "Update"}}</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                {{end}}
            {{end}}
        </div>
        {{if .AuthorData.Image}}
        <div class="col-lg-3 col-md-6 col-sm-6 text-end d-flex align-items-center">
            <img src="{{.AuthorData.Image}}" class="img-fluid rounded-end" alt="{{.Author.Name}}">
        </div>
        {{end}}
    </div>
</div>

<script type="module" src="/js/datetime.js"></script>

